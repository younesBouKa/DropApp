{
	"info": {
		"_postman_id": "725157b9-586a-49c7-a574-c301d170621d",
		"name": "Drop",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "auth",
			"item": [
				{
					"name": "signUp",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var res = pm.response.json();",
									"pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"status ok\",function(){",
									"    pm.expect(res.ok).to.be.true;",
									"});",
									"",
									"pm.test(\"user to be created\",function(){",
									"    pm.expect(res.data.id).to.be.string();",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"username\": \"younes\",\n\t\"email\" : \"younes@gmail.com\",\n\t\"password\" : \"pass\",\n\t\"roles\" : [\"user\",\"admin\"],\n\t\"homeDirectory\" : \"toto\"\n}"
						},
						"url": {
							"raw": "localhost:8090/api/v0/auth/signup",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"auth",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var res = pm.response.json();",
									"pm.test(\"Status code is 200\", function () {",
									"        pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"to be ok\",function(){",
									"    pm.expect(res.ok).to.be.true;",
									"});",
									"",
									"pm.test(\"to have data\",function(){",
									"    pm.expect(res).to.be.ownProperty(\"data\");",
									"});",
									"",
									"pm.test(\"to have token\",function(){",
									"    pm.expect(res.data).to.be.ownProperty(\"token\");",
									"});",
									"",
									"",
									"if(res && res.ok){",
									"    var token = res.data.token; ",
									"    postman.setEnvironmentVariable(\"token\", \"Bearer \"+token);",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"username\": \"younes\",\n\t\"password\" : \"pass\"\n}"
						},
						"url": {
							"raw": "localhost:8090/api/v0/auth/login",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "node",
			"item": [
				{
					"name": "insertHugeFile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var res = JSON.parse(responseBody);",
									"",
									"if(res && res.ok){",
									"    var nodeid = res.data.id; ",
									"    postman.setEnvironmentVariable(\"nodeId\", nodeid);",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/Users/yboukanoucha/Desktop/hugeFile.zip"
								},
								{
									"key": "nodeInfo",
									"value": "{\"name\":\"myFile\",\"fields\" : {\"huge\":\"file\"}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes"
							]
						}
					},
					"response": []
				},
				{
					"name": "insertFile",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var res = JSON.parse(responseBody);",
									"",
									"if(res && res.ok){",
									"    var nodeid = res.data.id; ",
									"    postman.setEnvironmentVariable(\"nodeId\", nodeid);",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": []
								},
								{
									"key": "nodeInfo",
									"value": "{\"fields\" : {\"text\":\"file\"}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes"
							]
						}
					},
					"response": []
				},
				{
					"name": "updateFile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/Users/yboukanoucha/Desktop/vocabularies.txt"
								},
								{
									"key": "nodeInfo",
									"value": "{\"name\" : \"toto file\", \"description\":\"toto .....\",\"fields\" : {\"update\":9, \"toto\":\"update 3\"}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes/60916825c14eec0309cfc22d",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"60916825c14eec0309cfc22d"
							]
						}
					},
					"response": []
				},
				{
					"name": "updateFileWithChunks",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							},
							{
								"key": "x-chunk-start-pos",
								"value": "12",
								"type": "text"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": []
								},
								{
									"key": "nodeInfo",
									"value": "{\"name\" : \"compressed file\",\"fields\" : {\"update\":9, \"toto\":\"update 3\"}}",
									"type": "text"
								},
								{
									"key": "chunk",
									"value": "RGVjb2RlIGFuZCBFbmNvZGUNCg==",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes/60918f5eee4e4149a64bf9f4",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"60918f5eee4e4149a64bf9f4"
							]
						}
					},
					"response": []
				},
				{
					"name": "getNode",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "localhost:8090/api/v0/nodes/608dbcfc34ac74178756efbd",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"608dbcfc34ac74178756efbd"
							]
						}
					},
					"response": []
				},
				{
					"name": "test",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "localhost:8090/api/v0/test/all",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"test",
								"all"
							]
						}
					},
					"response": []
				},
				{
					"name": "zipNodes",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"compressedZip.zip\",\r\n    \"fields\" : {\"test\":\"zip ok\"},\r\n    \"nodesId\" : [\r\n        \"609144d6bddc223f0cbebcf3\"\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes/compress",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"compress"
							]
						}
					},
					"response": []
				},
				{
					"name": "getNodeContent",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							},
							{
								"key": "If-Range",
								"value": "Wed, 21 Oct 2020 07:28:00 GMT",
								"type": "text",
								"disabled": true
							},
							{
								"key": "Range",
								"value": "bytes=453-1900",
								"type": "text",
								"disabled": true
							}
						],
						"url": {
							"raw": "localhost:8090/api/v0/nodes/60918f5eee4e4149a64bf9f4/stream",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"60918f5eee4e4149a64bf9f4",
								"stream"
							]
						}
					},
					"response": []
				},
				{
					"name": "getRoots",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "localhost:8090/api/v0/nodes",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes"
							]
						}
					},
					"response": []
				},
				{
					"name": "getNodesByQuery",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "localhost:8090/api/v0/nodes/608d6b063083550b82a821e8/children?search=f",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"608d6b063083550b82a821e8",
								"children"
							],
							"query": [
								{
									"key": "search",
									"value": "f"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "clear",
			"item": [
				{
					"name": "deleteNode",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "{{token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "localhost:8090/api/v0/nodes/{{nodeId}}",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"v0",
								"nodes",
								"{{nodeId}}"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}